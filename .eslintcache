[{"/Users/tomnyson/Desktop/research/vercel-demo/src/index.js":"1","/Users/tomnyson/Desktop/research/vercel-demo/src/App.js":"2"},{"size":431,"mtime":1628000629603,"results":"3","hashOfConfig":"4"},{"size":4689,"mtime":1628049450891,"results":"5","hashOfConfig":"4"},{"filePath":"6","messages":"7","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"8"},"1uuz4pc",{"filePath":"9","messages":"10","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"11"},"/Users/tomnyson/Desktop/research/vercel-demo/src/index.js",[],["12","13"],"/Users/tomnyson/Desktop/research/vercel-demo/src/App.js",["14","15"],"import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport ABIERC721 from \"./untils/abiToken.json\";\nconst Web3 = require(\"web3\");\nlet web3 = new Web3(\n  Web3.givenProvider ||\n    \"https://rinkeby.infura.io/v3/1c37394c71d748369948038cfbc3e79\"\n);\nconst dateSaleEnd = 1628045829534 + 30 * 3600 * 24 * 1000;\nfunction App() {\n  const [isBuy, setIsBuy] = useState(false);\n  const [totalSupply, setTotalSupply] = useState(0);\n  const [badieSupply, setBadieSupply] = useState(0);\n  const [dateSale, setDateSale] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    window.addEventListener(\"load\", async () => {\n      if (window.ethereum) {\n        web3 = new Web3(window.ethereum);\n        try {\n          window.ethereum.enable().then(async function async() {\n            const account = await web3.eth.getAccounts();\n            console.log(\"account\", account);\n            actionSmartConstract(account[0]);\n          });\n        } catch (e) {\n          // User has denied account access to DApp...\n        }\n      }\n      // Legacy DApp Browsers\n      else if (window.web3) {\n        web3 = new Web3(window.web3.currentProvider);\n        console.log(\"web3\", web3);\n      }\n      // Non-DApp Browsers\n      else {\n        alert(\"You have to install MetaMask !\");\n      }\n    });\n  }, []);\n\n  const actionSmartConstract = async (senderAddress) => {\n    console.log(\"ABIERC721\", ABIERC721);\n    const ercConstract = new web3.eth.Contract(\n      ABIERC721,\n      \"0x6590D6f9B8120aa30C36b9DF38CAAf7cA51175Dc\"\n    );\n    console.log(\n      \"process.env.ercConstract\",\n      process.env.REACT_APP_CONSTRACT_ADDRESS\n    );\n    const price = await ercConstract.methods.getPrice().call({\n      from: senderAddress,\n    });\n    const saleActive = await ercConstract.methods.saleActive().call({\n      from: senderAddress,\n    });\n    if (saleActive === true) {\n      setIsBuy(true);\n    }\n    //badieSupply  //badieSupply\n    const totalSupply = await ercConstract.methods.totalSupply().call({\n      from: senderAddress,\n    });\n    setTotalSupply(totalSupply);\n    const badieSupply = await ercConstract.methods.totalSupply().call({\n      from: senderAddress,\n    });\n    setBadieSupply(badieSupply);\n    const tokenId = await ercConstract.methods.tokenURI(2).call({\n      from: senderAddress,\n    });\n    const tokenIndex = await ercConstract.methods.tokenByIndex(1).call({\n      from: senderAddress,\n    });\n    console.log(\"badieSupply\", badieSupply);\n    console.log(\"tokenId\", tokenId);\n    console.log(\"tokenIndex\", tokenIndex);\n    const d1 = new Date();\n    const d2 = new Date(dateSaleEnd);\n    console.log(new Date().getTime());\n    console.log(\"d1\", d1);\n    console.log(\"d2\", d2);\n    console.log(\"d1.getTime() <= d2.getTime()\", d1.getTime() <= d2.getTime());\n    if (d1.getTime() <= d2.getTime()) {\n      setDateSale(true);\n    }\n    setLoading(false);\n  };\n\n  const onBuyToken = async () => {\n    if (window.ethereum) {\n      const ercConstract = new web3.eth.Contract(\n        ABIERC721,\n        \"0x6590D6f9B8120aa30C36b9DF38CAAf7cA51175Dc\"\n      );\n      const account = await web3.eth.getAccounts();\n      console.log(\"account\", account);\n      const buyToken = await ercConstract.methods\n        .mintBadie(15)\n        .send({ from: account[0] })\n        .catch((error) => {\n          setMessage(\"\");\n        });\n      console.log(\"buyToken\", buyToken);\n    }\n  };\n\n  if (loading) {\n    return <WrapperStyled>Loading....</WrapperStyled>;\n  }\n  if (isBuy) {\n    return (\n      <WrapperStyled>\n        {totalSupply > badieSupply ? (\n          <ButtonStyleed>Sold Out</ButtonStyleed>\n        ) : (\n          <ButtonBuyStyled onClick={onBuyToken}>BUY NOW</ButtonBuyStyled>\n        )}\n      </WrapperStyled>\n    );\n  }\n  if (!isBuy) {\n    return (\n      <WrapperStyled>\n        {dateSale ? (\n          <ButtonStyleed>Sale Finished</ButtonStyleed>\n        ) : (\n          <ButtonStyleed>Sale not yet active</ButtonStyleed>\n        )}\n      </WrapperStyled>\n    );\n  }\n}\nconst WrapperStyled = styled.div`\n  width: 100%;\n  margin-top: 100px;\n  display: flex;\n  justify-content: center;\n`;\nconst ButtonStyleed = styled.button`\n  width: 200px;\n  height: 50px;\n  background: red;\n  color: #fff;\n  font-weight: bold;\n  border: none;\n  cursor: pointer;\n  text-transform: uppercase;\n  :hover {\n    background: #333;\n  }\n`;\n\nconst ButtonBuyStyled = styled.button`\n  width: 200px;\n  height: 50px;\n  background: green;\n  color: #fff;\n  font-weight: bold;\n  border: none;\n  cursor: pointer;\n  text-transform: uppercase;\n  :hover {\n    background: #333;\n  }\n`;\n\nexport default App;\n",{"ruleId":"16","replacedBy":"17"},{"ruleId":"18","replacedBy":"19"},{"ruleId":"20","severity":1,"message":"21","line":16,"column":10,"nodeType":"22","messageId":"23","endLine":16,"endColumn":17},{"ruleId":"20","severity":1,"message":"24","line":53,"column":11,"nodeType":"22","messageId":"23","endLine":53,"endColumn":16},"no-native-reassign",["25"],"no-negated-in-lhs",["26"],"no-unused-vars","'message' is assigned a value but never used.","Identifier","unusedVar","'price' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]